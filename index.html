
<!DOCTYPE html>
<html lang="zxx">
<head>
<meta charset="UTF-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="Watch anime free in high-quality on Genoanime. We have no ads and best of all you can Stream all anime for free. Watch one piece,demonslayer and many more" />
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta property="og:site_name" content="genoanime" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://genoanime.com" />
<meta property="og:image" content="https://genoanime.com/anime/poster/canaan.jpg" />
<meta name="theme-color" content="#0B0C2A">

<meta name="twitter:card" content="summary_large_image">
<link href="https://vjs.zencdn.net/7.11.4/video-js.css" rel="stylesheet" />
<link href="https://unpkg.com/video.js@7/dist/video-js.min.css" rel="stylesheet">

<link href="https://unpkg.com/@videojs/themes@1/dist/city/index.css" rel="stylesheet">
<link rel="shortcut icon" href="./img/favicon.ico" type="image/x-icon">
<link rel="icon" href="./img/favicon.ico" type="image/x-icon">
<meta property="og:locale" content="en_US" />
<meta property="og:type" content="website" />
<meta name="keywords" content="genoanime,free anime stream,KissAnime, DubbedAnime, Watch high quality anime online, anime english sub, anime english dub, watch anime online, anime online, anime streaming, anime mobile,anime,kissanime,freeanime,streaming,animedao,watch anime online, anime subbed, anime dubbed, watch anime for free, anime subbed online, mobile anime" />

<meta name="google-signin-client_id" content="102190729482-gk2igduqpmt99luvd6ucrlnqqjrm6kin.apps.googleusercontent.com">
<title>Watching - CANAAN  on Genoanime</title>

<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Mulish:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">

<link rel="stylesheet" href="css/bootstrap.min.css" type="text/css">
<link rel="stylesheet" href="css/font-awesome.min.css" type="text/css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" type="text/css">
<link rel="stylesheet" href="css/elegant-icons.css" type="text/css">
<link rel="stylesheet" href="css/plyr.css" type="text/css">
<link rel="stylesheet" href="css/nice-select.css" type="text/css">
<link rel="stylesheet" href="css/owl.carousel.min.css" type="text/css">
<link rel="stylesheet" href="css/slicknav.min.css" type="text/css">
<link rel="stylesheet" href="css/style.css" type="text/css">
<link rel="stylesheet" href="css/watch.css" type="text/css">
<link rel="stylesheet" href="css/form-style.css" type="text/css">
<link rel="stylesheet" href="css/design.css" type="text/css">
<style>
        .arrows:focus, .arrows:hover{
            color: #fed8b1;
        }
        .arrows {
            color: darkorange;
        }
        #anime_name{
            background: #b7b7b7;
        }
        .anime__video__player {
			margin-bottom: 10px !important;
        }
        
        .li-back{
            background-color: transparent !important;
            background: none !important;
            border: none !important;
        }


        .btn-colour{
            background-color: white !important;
            
        }
        .changesource  {
        }

        .begone{
            display:none;
        }
 
    </style>

<script async src="https://www.googletagmanager.com/gtag/js?id=G-0QSJRVJ899" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script type="3a5e1d93b2f64357240387e5-text/javascript">
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-0QSJRVJ899');
    </script>
</head>
<body>


<div id="container">

<header class="header">
<div class="container">
<div class="row">
<div class="col-lg-2">
<div class="header__logo">
<a href="./">
<img id="desktop" src="img/gen.gif" alt="">
<img id="mobile" src="img/gen.gif" alt="">
</a>
</div>
</div>

<div class="col-lg-10" style="padding-top: 10px;">
<div class="header__nav">
<nav class="header__menu mobile-menu">
<ul>
<li><a href="./">Home</a></li>
<li><a href="./browse">Browse</a></li>
<li><a href="./search">Search</a></li>
<li><a href="./schedule">Schedule</a></li>
<li><a href='./details?id=7357'>Random</a></li>
<li>
<div class="d-none d-lg-block">
<a class="nav-link dropdown-toggle" href="#" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"></span>Extras</a>
<div class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
<a class="dropdown-item" href="./amv">AMV</a>
<a class="dropdown-item" href="./gallery">Art Gallery</a>
<a class="dropdown-item" href="./spring">Spring</a>
</div>
</div>
</li>
<li><a href="./donate" style="color:yellow">Shop <i class="fa fa-donate"></i></a></li>

<li>
<a href="./login.php"><span class="icon_profile"></span> Login</a> </li>
</ul>
</nav>
</div>
</div>
</div>
<div id="mobile-menu-wrap"></div>
</div>
</header>


<div class="breadcrumb-option">
<div class="container">
<div class="row">
<div class="col-lg-12 ">
<div class="text-center" style="color:red">Note that if the video is not playing use the other server</div>
</div>
<div class="col-lg-12">
<div class="breadcrumb__links">
<a href="./"><i class="fa fa-home"></i> Home</a>
<a href="#" id="anime_details_breadcrumbs"> CANAAN </a>
<span>
Episode 4 </span>
<div id="changer" class="float-right">
<select style="color:black" class="changesource" name="source">
<option style="color:black !important" disabled value="">Select Video Server</option>
<option style="color:black !important" value="genoanime">Genoanime A</option>
<option style="color:black !important" value="4anime">Genoanime B</option> <option style="color:red !important" value="vidstream">Vidstream (ads)</option>
</select>
</div>
</div>
</div>
</div>
</div>
</div>

<div id="myElement"></div>

<section class="details spad">
<div class="container">
<div class="row">
<div class="col-lg-12">
<div id="video" class="anime__video__player"><iframe id="iframeplayer" allowfullscreen="" allow="fullscreen" src="https://streamani.net/streaming.php?id=MTA1MDM=" frameborder="0" scrolling="no"></iframe></div>
</div>
<div class="col-lg-12 text-center">
<div class="previous_next_buttons d-flex justify-content-center" id="previous_next_buttons">
<ul class="list-group list-group-horizontal">
<button class="btn-colour" style="border-top-left-radius:20px;border-bottom-left-radius:20px" id="btn_previous"><li class="li-back list-group-item" style="border-top-left-radius:20px;border-bottom-left-radius:20px" id="previous_button"></li></button>
<button class="btn-colour" id="btn_episode"><li class="li-back  list-group-item" id="current_episode" style="color: mediumblue; font-weight: 700;cursor: default;  pointer-events: none;  ">Episode 4: Lingering Sunset</li></button>
<button class="btn-colour" id="btn_next" style="border-top-right-radius:20px;border-bottom-right-radius:20px"><li class="li-back list-group-item" id="next_button" style="border-top-right-radius:20px;border-bottom-right-radius:20px"></li></button>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-lg-12">
<div class="anime__details__episodes">
<div class="section-title" style="padding-top:30px">
<h5>Episodes</h5>
</div>
<ul class='nav nav-tabs nav-justified pagenumber'><li class='active'><a data-toggle='tab' href='#menu1'>1 - 13</a></li></ul>
<div class='tab-content' style='padding-top: 10px;'><div id='menu1' class='tab-pane fade in active'><a class="episode" style="width:90px" href="./watch?name=canaan&episode=1">Ep 01</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=2">Ep 02</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=3">Ep 03</a><a class="episode" style="color: #000000;background: #ffffff;width:90px" href="./watch?name=canaan&episode=4"><b>Ep 04</b></a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=5">Ep 05</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=6">Ep 06</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=7">Ep 07</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=8">Ep 08</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=9">Ep 09</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=10">Ep 10</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=11">Ep 11</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=12">Ep 12</a><a class="episode" style="width:90px" href="./watch?name=canaan&episode=13">Ep 13</a></div></div>
</div>
</div>
</div>
</div>
</section>
<div id="disqus_thread" class="text-center container" style="padding-bottom:50px;">
<a href="#" class="btn btn-success" onclick="if (!window.__cfRLUnblockHandlers) return false; loadDisqus();return false;" data-cf-modified-3a5e1d93b2f64357240387e5-=""><i class="far fa-comment"></i> Show/Post Comments</a>
</div>

</div>

<footer class="footer">

<div class="container">
<div class="row">
<div class="col-lg-3">
<div class="footer__logo">
<a href="./"><img src="img/gen.gif" alt="" width="auto" height="70px"></a>
</div>
</div>
<div class="col-lg-9">
<div class="footer__nav text-center">
<ul>
<li><a href="https://discord.gg/TMe9eVs2YY" target="_blank"><img style="width:5vw;height:5vw" src="img/logo/discord.png" alt="Discord"></a></li>
<li><a href="https://www.instagram.com/genoanime" target="_blank"><img style="width:5vw;height:5vw" src="img/logo/Instagram.png" alt="Instagram"></a></li>
<li><a href="https://www.facebook.com/genoanime" target="_blank"><img style="width:5vw;height:5vw" src="img/logo/facebook.png" alt="Facebook"></a></li>
<li><a href="https://genodrama.com" target="_blank"><img style="width:4vw;height:4vw" src="img/logo/GenoDrama.gif" alt="GenoDrama"></a></li>
<li><a href="https://genomovies.com" target="_blank"><img style="width:4vw;height:4vw" src="img/logo/GenoMovies.gif" alt="GenoMovies"></a></li>
</ul>
</div>
</div>
</div>
</div>
</footer>


<div class="search-model">
<div class="h-100 d-flex align-items-center justify-content-center">
<div class="search-close-switch"><i class="icon_close"></i></div>
<form class="search-model-form" action="browse.php" method="get">
<button type="submit" class="search_button"><span class="icon_search"></span></button>
</form>
</div>
</div>


<script src="js/jquery-3.3.1.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous" type="3a5e1d93b2f64357240387e5-text/javascript"></script>

<script src="js/bootstrap.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>

<script src="js/jquery.nice-select.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="js/mixitup.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="js/jquery.slicknav.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="js/owl.carousel.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="js/toastr.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="js/main.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/mousetrap/1.6.5/mousetrap.min.js" integrity="sha512-+Jg3Ynmj9hse704K48H6rBBI3jdNBjReRGBCxUWFfOz3yVurnJFWtAWssDAsGtzWYw89xFWPxShuj2T6E9EOpg==" crossorigin="anonymous" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="https://apis.google.com/js/platform.js" async defer type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script type="3a5e1d93b2f64357240387e5-text/javascript">
  $(document).ready(function(){
      
  $(".search-switch").click(function() {
    $( "#search-input" ).focus();
  });
    
  $('li a[href="./' + location.pathname.split("/")[1] + '"]').parent().addClass("active");


    $(".selection").change(function() {
        window.location = '?sort=' + ($('.selection').val());
    });



  });

</script>

<script src="https://ajax.cloudflare.com/cdn-cgi/scripts/7d0fa10a/cloudflare-static/rocket-loader.min.js" data-cf-settings="3a5e1d93b2f64357240387e5-|49" defer=""></script></body>
</html><script src="https://vjs.zencdn.net/7.11.4/video.min.js" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mousetrap/1.6.5/mousetrap.min.js" integrity="sha512-+Jg3Ynmj9hse704K48H6rBBI3jdNBjReRGBCxUWFfOz3yVurnJFWtAWssDAsGtzWYw89xFWPxShuj2T6E9EOpg==" crossorigin="anonymous" type="3a5e1d93b2f64357240387e5-text/javascript"></script>
<script type="3a5e1d93b2f64357240387e5-text/javascript">
   function loadDisqus() {  
        var d = document, s = d.createElement('script');
        s.src = 'https://https-genoanime-com.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
        
    };
    function nextEpisode(){
        $("#next_button").click()
    }

    function prevEpisode(){
        $("#previous_button").click()
    }

    function complEpisode(){
        clearInterval(completion_checker);
        $("#btn_episode").off("click");
        Mousetrap.unbind("C");
        
            $.ajax({
                url : "data/mark_episode_completed.php",
                type: "POST",
                success: function(result, status, xhr) { 
                    console.log("Episode Successfully Marked as Completed");
                },
                error: function(xhr, status, error) { 
                    console.log("An error occured when marking episode as completed. Please try again or contact a system admin.");
                },
            });    }

    var completion_checker = setInterval(function() {
        videoplayer = document.querySelector("iframe").contentWindow.document.querySelector("video");
        if (videoplayer.currentTime > videoplayer.duration*0.85) {
            complEpisode();
        }
    }, 200);



var eventMethod = window.addEventListener
			? "addEventListener"
			: "attachEvent";
	var eventer = window[eventMethod];
	var messageEvent = eventMethod === "attachEvent"
		? "onmessage"
		: "message";
	eventer(messageEvent, function (e) {
		
		// if (e.origin !== 'http://the-trusted-iframe-origin.com') return;
		console.log(e.data)
		if (e.data === "myevent" || e.message === "myevent"){
            nextEpisode()
        }
        else if (e.data === "Next Episode" || e.message === "Next Episode") {
            nextEpisode()
                } else if (e.data === "Previous Episode" || e.message === "Previous Episode") {
                    prevEpisode()
                } else if (e.data === "Mark Episode as Completed" || e.message === "Mark Episode as Completed") {
                    complEpisode()
                }
			// alert('M essage from iframe just came!');
		
	});

    
    $( document ).ready(function() {

        var anime_alternate = 'https://v1.4animu.me/Canaan/Canaan-Episode-04-1080p.mp4';

        // if (anime_alternate !=''){
        //     $('#iframeplayer').attr('src', 'https://genoanime.com/plyrhtmltest.php?id='+'MTA1MDM=&alt=https://v1.4animu.me/Canaan/Canaan-Episode-04-1080p.mp4&src=B')
        // }
       
        $('.changesource').change(function(){
            source = $(this).val()

            
            if (source == "4anime"){
                $('#iframeplayer').attr('src', 'https://genoanime.com/plyrhtmltest.php?id='+'MTA1MDM=&alt=https://v1.4animu.me/Canaan/Canaan-Episode-04-1080p.mp4&src=B')
                // echo '<iframe allowfullscreen="" allow="fullscreen" src="https://mountainoservo0002.animecdn.com/SK8-the-Infinity/SK8-the-Infinity-Episode-01-1080p.mp4" frameborder="0" scrolling="no"></iframe>';
            }else{
            if (source == "genoanime"){
                    $('#iframeplayer').attr('src', 'https://genoanime.com/plyrhtmltest.php?id='+'MTA1MDM=&alt=https://v1.4animu.me/Canaan/Canaan-Episode-04-1080p.mp4&src=A')
                }
                else{
            if (source == "vidstream"){
                    $('#iframeplayer').attr('src', 'https://streamani.net/streaming.php?id='+'MTA1MDM=')
                }
            }
            }
            

        })
	
        $('ul.pagenumber > li.active a')[0].click();
        function getWatched(){
                var anime =  'canaan';
                if(localStorage.getItem(anime)){
                    var watchlist = localStorage.getItem(anime);
                    watchlist = watchlist.split(",")
                    for (i = 0; i < watchlist.length; i++) {
                        $($(".episode")[watchlist[i]-1]).addClass('visited')
                    } 
                }


            }
        getWatched();

		var anime =  'canaan';
		$.get("data/get_anime_breadcrumb.php?slug=" + anime , function(data, status){
			var newUrl = 'details?id='+data;
			$('#anime_details_breadcrumbs').attr("href", newUrl); 
		});

        
        var databaseID = 43251;
        var episode = 4;
        var anime =  'canaan';
        if(localStorage.getItem(anime)){
            var array = [localStorage.getItem(anime)];
        }else
        var array = [];
        if (array.length >0  && array[0].indexOf(episode) === -1) array.push(episode);
        if (array.length ==0) array.push(episode);
        localStorage.setItem(anime,array)
        var highestEpisode = '13';
        var currentEpisode =  '4';
        function previous_next_buttons(highestEpisode,currentEpisode ){
            var href = new URL(window.location.href);
        
         
            if(currentEpisode != 1){
                show_previous = true;
                href.searchParams.set('episode',Number(currentEpisode) - 1);
                $( "#previous_button" ).wrap( "<a data-toggle='tooltip' data-placement='top' title='Previous Episode (Shift-p)' class='arrows' href='" + href.href + "'></a>" );
                $( "#previous_button" ).append( "<i class='fa fa-arrow-left'></i>" );
            }else{
                $( "#previous_button" ).append("<i class='fa fa-arrow-left'></i>");
                $( "#btn_previous" ).attr('disabled', true);

            }
            if(currentEpisode != highestEpisode){
                link = href.searchParams.set('episode',Number(currentEpisode) + 1);
                $( "#next_button" ).wrap( "<a data-toggle='tooltip' data-placement='top' title='Next Episode (Shift-n)' class='arrows' href='" + href.href + "'></a>" );
                $( "#next_button" ).append( "<i class='fa fa-arrow-right'></i>" );
            }else{
                $( "#next_button" ).append("<i class='fa fa-arrow-right'></i>");
                $( "#btn_next" ).attr('disabled', true);
            }
        }
        previous_next_buttons(highestEpisode,currentEpisode);

        $("#current_episode").wrap( "<a data-toggle='tooltip' data-placement='top' title='Mark Episode as Completed (Shift-c)'></a>");


        function setRecentWatched(anime,episode, databaseID){
            var form_data
            $.ajax({
                url : 'data/recently_watched.php',
                type: 'POST',
                data : {"anime" :anime, "episode" : episode, "id" : databaseID},
                error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    console.log(errorThrown)
                }
            });
        }
        setRecentWatched(anime,episode, databaseID);
		document.getElementById("video").scrollIntoView();


        Mousetrap.bind("N", function(e) {
            nextEpisode();
        });
        Mousetrap.bind("P", function(e) {
            prevEpisode();
        });
        Mousetrap.bind("C", function(e) {
            complEpisode();
        });

        $("#btn_episode").click(complEpisode);
		  function getVideoTime () {
            return document.querySelector("iframe").contentWindow.document.querySelector("video").currentTime
            // var min = 0.000000,
            // max = 23.000000,
            // highlightedNumber = Math.random() * (max - min) + min;
            // return highlightedNumber
 
        }
        
        if (typeof(Storage) !== "undefined") {
			function timer() {
				if (localStorage.hasOwnProperty(databaseID)) {
					console.log(databaseID)
					document.querySelector("iframe").contentWindow.document.querySelector("video").currentTime = localStorage.getItem(databaseID)
				}
			}
			var myVar = setTimeout(timer, 2000);
            setInterval(function(){ 
                var vidtime = getVideoTime();
                localStorage.setItem(databaseID,vidtime);
            }, 10000);

        }
		// setInterval(function(){ 
          // var vidtime = getVideoTime();
          // $.ajax({
                // url : 'data/recently_watched.php',
                // type: 'POST',
                // data : {"anime" :anime, "episode" : episode, "id" : databaseID, "currentTime":vidtime },
                // error: function(XMLHttpRequest, textStatus, errorThrown) { 
                    // console.log(errorThrown)
                // }
            // });

         // }, 5000);

    });
    </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</body>
</html>
